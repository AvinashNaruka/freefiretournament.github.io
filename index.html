<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Free Fire Tournament Manager - Auth</title>
<style>
  body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: #eee;
    margin: 0; padding: 0;
  }
  .container {
    max-width: 480px;
    margin: 40px auto;
    background: #1b2631;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 0 20px #0a1f2e;
  }
  h1, h2 {
    margin: 0 0 15px 0;
    color: #f39c12;
  }
  label {
    display: block;
    margin-top: 12px;
    font-size: 0.9rem;
    color: #f5c26b;
  }
  input[type="email"],
  input[type="password"] {
    width: 100%;
    margin-top: 6px;
    padding: 8px 10px;
    border-radius: 8px;
    border: none;
    background: #162029;
    color: #ddd;
    font-size: 1rem;
  }
  button {
    width: 48%;
    margin-top: 20px;
    padding: 10px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(45deg, #f39c12, #f1c40f);
    color: #1b2631;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: linear-gradient(45deg, #d88e1a, #d1b50f);
  }
  #logoutBtn {
    width: 100%;
    background: #e74c3c;
    color: #fff;
    font-weight: 700;
    margin-top: 10px;
  }
  #logoutBtn:hover {
    background: #c0392b;
  }
  #authMessage {
    margin-top: 15px;
    padding: 10px;
    border-radius: 8px;
  }
  .success {
    background: #27ae60;
    color: white;
  }
  .error {
    background: #c0392b;
    color: white;
  }
  #userEmail {
    margin-bottom: 15px;
    font-weight: 700;
    color: #f39c12;
  }
  .admin-badge {
    background: #e67e22;
    padding: 5px 14px;
    border-radius: 20px;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 15px;
  }
</style>
</head>
<body>

<div class="container">

  <h1>Free Fire Tournament Manager</h1>

  <div id="authSection">
    <h2>Login / Signup</h2>
    <label for="emailInput">Email:</label>
    <input type="email" id="emailInput" placeholder="Enter your email" autocomplete="username" />
    <label for="passwordInput">Password:</label>
    <input type="password" id="passwordInput" placeholder="Enter your password" autocomplete="current-password" />
    <div style="display: flex; justify-content: space-between;">
      <button id="loginBtn">Login</button>
      <button id="signupBtn">Sign Up</button>
    </div>
    <div id="authMessage"></div>
  </div>

  <div id="mainApp" style="display:none;">
    <div id="userEmail"></div>
    <div id="adminBadge" class="admin-badge" style="display:none;">Admin</div>
    <button id="logoutBtn">Logout</button>
  </div>

</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import {
    getAuth,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

  // Replace with your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCAjiInmaJsHSqhlxZZ0heIdNEMu6m6Y6Y",
    authDomain: "freefire-tournament-2009.firebaseapp.com",
    projectId: "freefire-tournament-2009",
    storageBucket: "freefire-tournament-2009.appspot.com",
    messagingSenderId: "498357283098",
    appId: "1:498357283098:web:2f05123efe6c57e65524a3"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const emailInput = document.getElementById('emailInput');
  const passwordInput = document.getElementById('passwordInput');
  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const authMessage = document.getElementById('authMessage');
  const userEmailDiv = document.getElementById('userEmail');
  const adminBadge = document.getElementById('adminBadge');
  const authSection = document.getElementById('authSection');
  const mainApp = document.getElementById('mainApp');

  const adminEmail = "avinashnaruka89@gmail.com";

  function showMessage(message, type) {
    authMessage.textContent = message;
    authMessage.className = type ? type : '';
  }

  loginBtn.addEventListener('click', () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();
    if(!email || !password) {
      showMessage('Please enter email and password.', 'error');
      return;
    }
    showMessage('Logging in...', 'success');
    signInWithEmailAndPassword(auth, email, password)
      .then(() => {
        showMessage('');
        emailInput.value = '';
        passwordInput.value = '';
      })
      .catch((error) => {
        showMessage("Login failed: " + error.message, 'error');
      });
  });

  signupBtn.addEventListener('click', () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();
    if(!email || !password) {
      showMessage('Please enter email and password.', 'error');
      return;
    }
    showMessage('Signing up...', 'success');
    createUserWithEmailAndPassword(auth, email, password)
      .then(() => {
        showMessage('Signup successful! Please login.', 'success');
        emailInput.value = '';
        passwordInput.value = '';
      })
      .catch((error) => {
        showMessage("Signup failed: " + error.message, 'error');
      });
  });

  logoutBtn.addEventListener('click', () => {
    signOut(auth);
  });

  onAuthStateChanged(auth, (user) => {
    if(user) {
      userEmailDiv.textContent = "Logged in as: " + user.email;
      authSection.style.display = 'none';
      mainApp.style.display = 'block';
      if(user.email === adminEmail) {
        adminBadge.style.display = 'inline-block';
      } else {
        adminBadge.style.display = 'none';
      }
    } else {
      userEmailDiv.textContent = '';
      authSection.style.display = 'block';
      mainApp.style.display = 'none';
      adminBadge.style.display = 'none';
      showMessage('');
    }
  });
</script>

</body>
</html>

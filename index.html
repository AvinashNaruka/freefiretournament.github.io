<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FreeFire Tournament — Local Demo (No Firebase)</title>
<style>
:root{--bg:#0b1220;--card:#0f1724;--accent:#ff9f1c;--muted:#94a3b8;--ok:#10b981}
body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#071027 0%,#031022 100%);color:#e6eef8}
.container{max-width:1100px;margin:18px auto;padding:18px}
.header{display:flex;justify-content:space-between;align-items:center;gap:12px}
h1{margin:0;font-size:20px}
.muted{color:var(--muted);font-size:13px}
.top-actions{display:flex;gap:8px;align-items:center}
.btn{background:var(--accent);color:#031022;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef8;padding:8px 10px;border-radius:8px;cursor:pointer}
.card{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;margin-top:14px}
.grid{display:grid;grid-template-columns:1fr 380px;gap:14px;margin-top:14px}
label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}
input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#e6eef8;margin-bottom:8px}
table{width:100%;border-collapse:collapse;margin-top:8px}
th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.03);text-align:left;font-size:13px}
.small{font-size:13px;padding:6px 8px}
.hidden{display:none}
.proof{max-width:120px;border-radius:8px;border:1px solid rgba(255,255,255,0.04)}
.status-ver{color:var(--ok);font-weight:700}
.danger{background:#7f1d1d;color:#ffdede}
.footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>FreeFire Tournament Manager</h1>
      <div class="muted">Local demo — no backend. Save as index.html & upload to GitHub Pages.</div>
    </div>
    <div class="top-actions">
      <div id="userBadge" class="muted">Not logged in</div>
      <button id="btnShowAuth" class="btn small">Login / Signup</button>
      <button id="btnLogout" class="btn-ghost small hidden">Logout</button>
    </div>
  </div>

  <div class="grid">
    <!-- left -->
    <section>
      <div id="authCard" class="card">
        <!-- login -->
        <div id="loginView">
          <h3>Login</h3>
          <label>Phone or Email</label>
          <input id="loginId" placeholder="Phone (91...) or email">
          <label>Password</label>
          <input id="loginPass" type="password" placeholder="password">
          <div style="display:flex;gap:8px">
            <button id="doLogin" class="btn">Login</button>
            <button id="showSignup" class="btn-ghost">Signup</button>
          </div>
          <p class="muted" style="margin-top:8px">Admin: username <strong>avinashnaruka08</strong> , password <strong>Avinash@031105</strong></p>
        </div>

        <!-- signup -->
        <div id="signupView" class="hidden">
          <h3>Signup (one account per phone)</h3>
          <label>Full name</label><input id="suName" placeholder="Your name">
          <label>Phone (unique)</label><input id="suPhone" placeholder="91XXXXXXXXXX">
          <label>Email (optional)</label><input id="suEmail" placeholder="email@example.com">
          <label>Free Fire ID</label><input id="suFF" placeholder="Free Fire custom ID">
          <label>Password</label><input id="suPass" type="password" placeholder="choose password">
          <div style="display:flex;gap:8px">
            <button id="doSignup" class="btn">Create account</button>
            <button id="showLogin" class="btn-ghost">Back to login</button>
          </div>
        </div>
      </div>

      <div id="tournamentsCard" class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h3>Tournaments</h3>
          <div>
            <button id="btnCreateT" class="btn-ghost small">Create tournament</button>
          </div>
        </div>
        <div id="tList" class="muted">No tournaments yet.</div>
      </div>

      <div id="createPanel" class="card hidden">
        <h3 id="createTitle">Create tournament</h3>
        <label>Title</label><input id="ctName" placeholder="Ex: Sunday Clash">
        <label>Date & time</label><input id="ctDate" type="datetime-local">
        <label>Entry fee (₹)</label><input id="ctFee" type="number" value="20">
        <label>Seats / Slots</label><input id="ctSlots" type="number" value="50">
        <div style="display:flex;gap:8px">
          <button id="saveTournament" class="btn">Save</button>
          <button id="cancelCreate" class="btn-ghost">Cancel</button>
        </div>
      </div>

      <div id="selectedCard" class="card hidden">
        <h3 id="selTitle">Tournament —</h3>
        <div class="muted" id="selInfo">—</div>
        <hr>
        <div id="registerBox">
          <h4>Register / Upload payment proof</h4>
          <label>Free Fire ID</label><input id="regFF" placeholder="">
          <label>Phone (from profile)</label><input id="regPhone" readonly>
          <label>Amount (auto)</label><input id="regAmount" readonly>
          <label>UTR / Txn Ref</label><input id="regUTR" placeholder="Enter UTR">
          <label>Upload payment screenshot (JPG/PNG)</label><input id="regProof" type="file" accept="image/*">
          <div style="display:flex;gap:8px;margin-top:8px">
            <button id="doRegister" class="btn">Submit registration</button>
            <button id="doRegisterFree" class="btn-ghost">Register without payment</button>
          </div>
          <p class="muted">Mobile: pay button will open UPI app. Desktop: scan QR shown below when you open tournament.</p>

          <div style="margin-top:10px">
            <div id="upiButtons"></div>
            <div id="qrBox" style="margin-top:8px"></div>
          </div>
        </div>

        <div id="yourRegs" style="margin-top:10px"></div>
      </div>
    </section>

    <!-- right -->
    <aside>
      <div class="card">
        <h3>Details</h3>
        <div id="detailsBox" class="muted">Login to create/join tournaments.</div>
      </div>

      <div id="adminPanel" class="card hidden">
        <h3>Admin Panel</h3>
        <div id="adminTList" class="muted">Select tournament to view participants.</div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="exportSelected" class="btn-ghost small">Export CSV (selected)</button>
          <button id="refreshAdmin" class="btn-ghost small">Refresh</button>
        </div>
      </div>

      <div class="card">
        <h3>Support</h3>
        <div class="muted">Call / WhatsApp for help</div>
        <div style="margin-top:8px">
          <a id="callSupport" href="tel:7976726014" class="btn-ghost small">Call 7976726014</a>
          <a id="waSupport" href="https://wa.me/919776726014" target="_blank" class="btn-ghost small">WhatsApp</a>
        </div>
        <h4 style="margin-top:10px">Quick UPI</h4>
        <div class="muted">PhonePe: <code>7976726014@axl</code><br>GPay: <code>avinashnaruka89@okicici</code></div>
      </div>
    </aside>
  </div>

  <div class="footer">Note: This is a client-side app — images stored in browser storage (localStorage). For production use server/storage.</div>
</div>

<script>
/* ---------------- Settings ---------------- */
const ADMIN_USERNAME = 'avinashnaruka_
